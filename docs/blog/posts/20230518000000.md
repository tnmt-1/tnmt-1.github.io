---
title: Route53 + ALB + EC2でWebサーバを公開する
date: 2023-05-18T20:35:00+09:00
tags: ["aws", "ec2", "alb", "route53"]
---

EC2 に Web サーバ立てて https でアクセスするように設定しようと思ったら完全に忘れてしまってたので残しておく。
キャプチャとか残すのはめんどうなので、大雑把な手順のみ記載する。

ところどころワードに誤りがあるかもしれません。いい感じに読み替えましょう。

## 前提

- ドメイン取得済み
- Route53 の DNS 設定とか済んでいる

## 手順

1. ACM で証明書を発行する
2. EC2 インスタンスを作成して Web サーバを立てる
3. EC2 に設定しているセキュリティグループのインバウンドに Web サーバのポートを開ける
4. ターゲットグループを作成する
   - プロトコル: http
   - ポート: Web サーバと同じ番号を指定する
5. ALB を作成する
   - プロトコル: https
   - ポート: 443
   - ターゲット: `4`で作成したもの
   - デフォルトの証明書: `1` で作成したやつ
6. Route53 でレコードを作成する
   - レコード名: ドメイン名
   - レコードタイプ: A
   - エイリアス: On
   - トラフィックのルーティング先: `5`の ALB
